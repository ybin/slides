## Introduction to Android Studio
<br/>

<small>孙延宾</smal>

<=== slide ===>
### Agenda

1. <p class="fragment">Installation</p>
1. <p class="fragment">Structure of source code</p>
1. <p class="fragment">Settings for Camera APP</p>
1. <p class="fragment">How it works?</p>
1. <p class="fragment">Features</p>
1. <p class="fragment">Problems</p>

<=== slide ===>

### Installation

1. <p class="fragment">Download Android Studio(and SDK)</p>
1. <p class="fragment">Set network proxy for Maven(optional)</p>
1. <p class="fragment">No step 3</p>

<=== slide ===>

##### Download Android Studio(and SDK)

- [http://www.androiddevtools.cn/](http://www.androiddevtools.cn/)
- [http://www.android-studio.org/](http://www.android-studio.org/)

<=== subslide ===>

![Download Android Studio](android_studio_download.jpg)

<=== slide ===>

##### Set network proxy for Maven(optional)

```bash
# set environment variables
http_proxy=http://<username>:<passwd>@<host>:<port>
https_proxy=http://<username>:<passwd>@<host>:<port>

# for example
http_proxy=http://10130990:zte.1234@proxyxa.zte.com.cn:80
https_proxy=http://10130990:zte.1234@proxyxa.zte.com.cn:80
```

<=== slide ===>

##### Structure of source code

1. <p class="fragment">project structure</p>
1. <p class="fragment">module  structure</P>

<=== slide ===>

`project` &nbsp; <small>vs</small> &nbsp; `workspace`

```bash
project                           |     workspace
   |                              |       |
   |--> module (e.g. app)         |       |--> project (e.g. camera)
   |--> module (e.g. our lib)     |       |--> project (e.g. our lib)
   |--> ...                       |       |--> ...
```

<=== subslide ===>

##### Project Structure

![Android Studio project structure](project_structure.png)

<=== subslide ===>

`local.properties`

```bash
## This file is automatically generated by Android Studio.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file should *NOT* be checked into Version Control Systems,
# as it contains information specific to your local configuration.
#
# Location of the SDK. This is only used by Gradle.
# For customization when using a Version Control System, please read the
# header note.
sdk.dir=D\:\\android\\sdk
```

<=== subslide ===>

`gradle.properties`

```bash
# Project-wide Gradle settings.

# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.

# For more details on how to configure your build environment visit
# http://www.gradle.org/docs/current/userguide/build_environment.html

# Specifies the JVM arguments used for the daemon process.
# The setting is particularly useful for tweaking memory settings.
org.gradle.jvmargs=-Xmx1536m

# When configured, Gradle will run in incubating parallel mode.
# This option should only be used with decoupled projects. More details, visit
# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects
# org.gradle.parallel=true
```

<=== subslide ===>

`settings.gradle`

```groovy
include ':app'
```

<=== subslide ===>

`build.gradle`

```groovy
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.2.2'
    }
}
allprojects {
    repositories {
        jcenter()
    }
}
task clean(type: Delete) {
    delete rootProject.buildDir
}
```

<=== slide ===>

`module` &nbsp; <small>vs</small> &nbsp; `project`
```bash
+---build.gradle                    |
+---build                           |
+---libs                            |
\---src                             |
    +---androidTest                 |
    |   \---java                    |
    +---main                        |
	|   +---AndroidManifest.xml     |      +---AndroidManifest.xml
	|   +---assets                  |      +---assets
    |   +---java                    |      +---src
    |   +---res                     |      +---res
	|   \---jni                     |      +---libs
    \---test                        |
        \---java                    |
```

<=== subslide ===>

`build.gradle` of module :app

```groovy
apply plugin: 'com.android.application'

android {
    compileSdkVersion 25
    buildToolsVersion "25.0.0"
    defaultConfig {
        applicationId "cc.ybin.newcamera"
        minSdkVersion 15
        targetSdkVersion 25
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.1', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    testCompile 'junit:junit:4.12'
}
```

<=== subslide ===>

Android Plugin DSL Reference

[http://google.github.io/android-gradle-dsl/current/](http://google.github.io/android-gradle-dsl/current/)

<=== slide ===>

### Settings for Camera APP

<=== subslide ===>

`build.gradle` of Camera

```groovy
apply plugin: "com.android.application"
android {
    compileSdkVersion 23
    buildToolsVersion "22.0.1"
    defaultConfig {
        applicationId "com.zte.camera"
        targetSdkVersion 23
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        debug {
            applicationIdSuffix ".dual"
            versionNameSuffix "-dual"
        }
    }
```

<=== subslide ===>

`build.gradle` (continue)
```groovy
    sourceSets {
        main {
            manifest.srcFile 'AndroidManifest.xml'
            java.srcDirs = ['src']
            resources.srcDirs = ['src']
            aidl.srcDirs = ['src']
            renderscript.srcDirs = ['src']
            res.srcDirs = ['res']
            assets.srcDirs = ['assets']
            jniLibs.srcDirs = ['libs']
        }
    }
    lintOptions {
        abortOnError false
    }
}
```

<=== subslide ===>

`build.gradle` (continue)
```groovy
/**
 * Important!!!
 */
gradle.projectsEvaluated {
    tasks.withType(JavaCompile) {
        options.compilerArgs <<
			"-Xbootclasspath/p:<path/to/your/zte_framework.jar>"
        options.encoding = "GBK"
    }
}

dependencies {
    compile fileTree(dir:'libs', include:'*.jar')
}
```

<=== slide ===>

### What is Android Studio indeed?

- <p class="fragment">IntelliJ Idea</p>
- <p class="fragment">Android plugin for IntelliJ Idea</p>
- <p class="fragment">Android plugin for Gradle</p>
- <p class="fragment">NDK support: CLion for C/C++</p>

<=== slide ===>

##### IntelliJ Idea

![Android Studio](android_studio.png)

<=== subslide ===>

Shortcuts

- Mac OS X
- Emacs
- Visual Studio
- Eclipse
- ......

<=== subslide ===>

| Description | Shortcut |
|-------------|----------|
| Search everywhere | Double Shift |
| Go to class | Ctrl+N |
| Go to file  | Ctrl+Shift+N |
| Find action | Ctrl+Shift+A |

<=== subslide ===>

Theme

- Darcula
- IntelliJ
- Windows
- customization

<=== slide ===>

##### Android plugin for Gradle
<br/>
> Gradle is an open source build automation system that builds upon the concepts of Apache Ant and Apache Maven and introduces a Groovy-based domain-specific language (DSL) instead of the XML form used by Apache Maven of declaring the project configuration.

<=== subslide ===>

Where is android plugin?

```groovy
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.2.2'
    }
}
```

[http://jcenter.bintray.com/com/android/tools/build/gradle/](http://jcenter.bintray.com/com/android/tools/build/gradle/)

<=== subslide ===>

Compile in command line:

```bash
$ gradle tasks
$ gradle app:assemble   # all variants compiled
```

<=== slide ===>

### Features

- <p class="fragment">Runtime monitors</p>
- <p class="fragment">Resource preview</p>
- <p class="fragment">Instant run</p>

<=== slide ===>

Runtime monitors

![Runtime monitors](runtime_monitors.png)

<=== subslide ===>

Resource preview

![Resource preview](resource_preview.png)

<=== subslide ===>

Resource preview (continue)

![String fold](string_fold.png)

<=== subslide ===>

Instant Run

<=== slide ===>

### Problems
- <p class="fragment">Can not resolve symbol...</p>
- <p class="fragment">Computer upgrade?</p>

<=== slide ===>

### The End
